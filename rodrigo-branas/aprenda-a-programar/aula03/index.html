<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // class + gasto por categoria pra todas.
        function gastoPorCategoria(lancamentos, prop) {
            let total = 0
            for (lancamento of lancamentos) {
                if (lancamento.tipo === "despesa") {
                    total += lancamento.valor                               
                }
            }
            for (lancamento of lancamentos) {
                if (prop === lancamento.categoria && lancamento.tipo === "despesa") {
                    let porcentagemCategoria = (lancamento.valor * 100) / total
                    console.log(lancamento.categoria, arredondar(porcentagemCategoria))
                    console.log({porcentagemCategoria})
                    return arredondar(porcentagemCategoria)
                }
            }
        }
        
        function arredondar(saldo) {
            return Math.round(saldo * 100) / 100
        }

        function calcularRendimento(saldo) {
            return saldo += saldo * 0.005
        }

        function calcularDivida(saldo) {
            return saldo += saldo * 0.01
        }

        function calcularSaldo(mes, saldoInicial, lancamentos) {
            console.log(mes)
            saldo = saldoInicial
            for (lancamento of lancamentos) {
                if (lancamento.tipo === "receita") {
                    saldo += lancamento.valor
                }
                if (lancamento.tipo === "despesa") {
                    saldo -= lancamento.valor
                }
            }
            estaPositivo = saldo > 0
            if (estaPositivo) {
                console.log("Está fazendo o certo jotume")
                saldo = arredondar(calcularRendimento(saldo))
                console.log(saldo)
                return saldo
            } else {
                console.log("Está devendo jotume")
                saldo = arredondar(calcularDivida(saldo))
                console.log(saldo)
                return saldo
            }
        }
        //Janeiro
        saldoInicial1 = 0
        lancamentoJaneiro = [
            { categoria: "Salario", tipo: "receita", valor: 5000 },
            { categoria: "Alimentacao", tipo: "despesa", valor: 1000 },
            { categoria: "Transporte", tipo: "despesa", valor: 400 },
            { categoria: "Internet", tipo: "despesa", valor: 170 },
            { categoria: "Luz", tipo: "despesa", valor: 600 },
            { categoria: "Agua", tipo: "despesa", valor: 150 },
            { categoria: "Lazer", tipo: "despesa", valor: 300 },
            { categoria: "Show do BTS e SKZ", tipo: "despesa", valor: 400 }
        ]
        saldo1 = calcularSaldo("Janeiro", saldoInicial1, lancamentoJaneiro)
        
        gastoLuz = gastoPorCategoria(lancamentoJaneiro, "Luz")
        gastoShow = gastoPorCategoria(lancamentoJaneiro, "Show do BTS e SKZ")
        

        // Fevereiro
        saldoInicial2 = saldo1
        lancamentoFevereiro = [
            { categoria: "Salario", tipo: "receita", valor: 5000 },
            { categoria: "Alimentacao", tipo: "despesa", valor: 1500 },
            { categoria: "Transporte", tipo: "despesa", valor: 800 },
            { categoria: "Internet", tipo: "despesa", valor: 170 },
            { categoria: "Luz", tipo: "despesa", valor: 800 },
            { categoria: "Agua", tipo: "despesa", valor: 150 },
            { categoria: "Lazer", tipo: "despesa", valor: 200 },
            { categoria: "Show do BTS e SKZ", tipo: "despesa", valor: 600 }
        ]
        saldo2 = calcularSaldo("Fevereiro", saldoInicial2, lancamentoFevereiro)

        // Março
        saldoInicial3 = saldo2
        lancamentoMarco = [
            { categoria: "Salario", tipo: "receita", valor: 5000 },
            { categoria: "Alimentacao", tipo: "despesa", valor: 1500 },
            { categoria: "Transporte", tipo: "despesa", valor: 800 },
            { categoria: "Internet", tipo: "despesa", valor: 170 },
            { categoria: "Luz", tipo: "despesa", valor: 800 },
            { categoria: "Agua", tipo: "despesa", valor: 150 },
            { categoria: "Lazer", tipo: "despesa", valor: 200 },
            { categoria: "Show do BTS e SKZ", tipo: "despesa", valor: 600 }
        ]
        saldo3 = calcularSaldo("Março", saldoInicial3, lancamentoMarco)

        console.log("Seu saldo total foi de")
        saldot = saldo3
        console.log(arredondar(saldot))

    </script>
</body>

</html>